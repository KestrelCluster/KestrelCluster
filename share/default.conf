# This file defines the default configuration. 
#
# Do not edit this file! 
# Use the file /etc/kestrel/kestrel.conf instead for customization.
#
# If you wish to write a new kestrel module, we recommend not to change this 
# file. Instead create a new file default.conf.d/<modulename>, this way any
# update on this file will not affect your module.


# Networking options
#####################

# Frontend's ip
FRONTEND_IP=192.168.30.1
FRONTEND_NETMASK=255.255.255.0

# Use and configure a local dhcp server
DHCP_SERVER=true

# IP range of the DHCP service
DHCP_STARTING_IP=192.168.30.2
DHCP_ENDING_IP=192.168.30.255

# How long between each check of nodes's connection
VERIFY_CONNECTION=5

# Kestrel's rpc port number
KESTREL_RPC_PORT=8787

# How long between waking up each node. Depending on the electrical power of 
# your cluster's room, if all the nodes wake up at the same time, they can 
# produce an electrical overload.
WAKEUP_SLEEP=.4


# Node options
###############

# Specify which kernel should be used on the nodes : auto | kernel-version
#    auto : The current kernel (uname -r) will be used on the nodes.
#    kernel-version : A linux kernel /boot/vmlinuz-<kernel-version> should be 
#                     accesible.
NODE_KERNEL=auto

# Filesystem used to export the /home dir 
#
#    nfs3|nfs4
#
HOME_FS=nfs4


# SECURITY
###########

# Export the /home dir or share another dir. 
# - If the computer is used as a Desktop, sharing the home dir can expose 
#   sensible data (pgp keys, email...) to the LAN.
#   By default /home/$user/.ssh/authorized_keys are disabled.
#
# - <path> will be shared among the nodes and a /<path>/$user dir will be 
#   created for each kestrel user. This dir will be the user's home on the
#   nodes, and can be accesed through the link /home/$user/kestrel.
#
#    home | <path>
HOME_MODE=/kestrel/

# Enable or disable whether ssh server's public key based authentication is 
# allowed. By default it is disabled since anyone with access to the exported 
# nfs home would be capable of log into the frontend with those keys :
#
#    auto | true | false
#
#    auto : Depends on $HOME_MODE. If /home is exported then public keys based
#           authentication is disabled.
SSH_PUBLICKEY=auto

# Allow kestrel users to run kestrel commands using sudo.
KESTREL_SUDOER=no

# Allow kestrel users to chroot into the images.
# Note that this option allows a kestrel user to gain root rights under a 
# chroot, which can lead the user to escape from the chroot environment and have 
# access to the whole system.
USERS_IMAGE_CHROOT=no


# NFS Options
##############

# Use nfs4 instead of nfs3. Values: true|false
# 
# NOTE: Currently it only works in debian.
NFS4=true

# In case there is not previous NFS4 pseudofilesystem kestrel's reconfigure
# will take this value for creating one.
# 
# Do not redefine this variable, kestrel will automatically try to detect your 
# NFS4 root, when reconfigured.
NFS4_ROOT="/exports"


# Debootstrap
##############

# Use a cache when creating a new image.
CACHED_IMAGE=true


# KestrelHPC user and group
############################

# By default kestrel's admin user
KESTREL_USER=kestrel

# By default kestrel group and user are the same
KESTREL_GROUP=$KESTREL_USER

# When creating a new user (from kestrel-users) call adduser using these options 
NEW_USER_OPTIONS=

# When deleting a user (from kestrel-users) call deluser using these options
DEL_USER_OPTIONS="--backup --remove-home"


# KestrelHPC node info files
#############################

# Host file we use to store the info of the connected nodes.
KESTREL_CON_NODES=/etc/hosts

# DHCP file we use to store the info of the registered nodes.
KESTREL_REG_NODES=${KESTREL_DATA_DIR}/registered_nodes

# Other
########

LOG_INDENT="    "

