# This file defines the default configuration. 
#
# Do not edit this file! 
# Use the file /etc/kestrel/kestrel.conf instead for customization.
#
# If you wish to write a new kestrel module, we recommend not to change this 
# file. Instead create a new file default.conf.d/<modulename>, this way any
# update on this file will not affect your module.


# Networking options
#####################

# Frontend's ip
FRONTEND_IP=192.168.30.1
FRONTEND_NETMASK=255.255.255.0

# Use and configure a local dhcp server
DHCP_SERVER=true

# IP range of the DHCP service
DHCP_STARTING_IP=192.168.30.2
DHCP_ENDING_IP=192.168.30.255

# Kestrel node's hostname prefix. For example : kestrel-test_image1-35
KESTREL_HOSTNAME="kestrel"

# How long between each check of nodes's connection
VERIFY_CONNECTION=5

# Kestrel's rpc port number
KESTREL_RPC_PORT=80000

# How long between waking up each node. Depending on the electrical power of 
# your cluster's room, if all the nodes wake up at the same time, they can 
# produce an electrical overload.
WAKEUP_SLEEP=.4


# Node options
###############

# Specify which kernel should be used on the nodes : auto | kernel-version
#    auto : The current kernel (uname -r) will be used on the nodes.
#    kernel-version : A linux kernel /boot/vmlinuz-<kernel-version> should be 
#                     accesible.
NODE_KERNEL=auto


# SECURITY
###########

# Allow kestrel users to run kestrel commands using sudo.
KESTREL_SUDOER=no

# Allow kestrel users to chroot into the images.
# Note that this option allows a kestrel user to gain root rights under a 
# chroot, which can lead the user to escape from the chroot environment and have 
# access to the whole system.
USERS_IMAGE_CHROOT=no


# NFS Options
##############

# Use nfs4 instead of nfs3. Values: true|false
NFS4=true

# In case there is not previous NFS4 pseudofilesystem kestrel's reconfigure
# will take this value for creating one.
# 
# Do not redefine this variable, kestrel will automatically try to detect your 
# NFS4 root, when reconfigured.
NFS4_ROOT="/exports"

# Use NFS4 for sharing the user's home. Values: true|false
NFS4_HOME=true


# ssh server options
#####################

# Enable or disable whether ssh server's public key based authentication is 
# allowed. By default it is disabled since anyone with access to the exported 
# nfs home would be capable of log into the frontend with those keys.
SSH_PUBLICKEY=false


# Debootstrap
##############

# Use a cache when creating a new image.
CACHED_IMAGE=true

# When installing an image os using debootstrap which mirror to use
DEBOOTSTRAP_MIRROR="de"


# KestrelHPC user and group
############################

# By default kestrel's admin user
KESTREL_USER=kestrel

# By default kestrel group and user are the same
KESTREL_GROUP=$KESTREL_USER

# When creating a new user (from kestrel-users) call adduser using these options 
NEW_USER_OPTIONS=

# When deleting a user (from kestrel-users) call deluser using these options
DEL_USER_OPTIONS="--backup --remove-home"


# KestrelHPC's directories
###########################

# Directory containing kestrel's defaults, scripts and hooks.
KESTREL_SHARE=/usr/share/kestrel

# Directory containing kestrel's data : node images, and tftpboot info
KESTREL_DATA_DIR=/var/lib/kestrel

# Directory containing kestrel's user defaults, scripts and hooks.
KESTREL_ETC=/etc/kestrel

# Directory containg tftpboot data : linux kernel, initramfs and pxe bootloader
TFTPBOOT_DIR=${KESTREL_DATA_DIR}/tftpboot

# Directory containing kestrel's node images
KESTREL_IMAGE_DIR=${KESTREL_DATA_DIR}/images

# Home dir
KESTREL_HOME_DIR="/home/"

# Host file we use to store the info of the connected nodes.
KESTREL_CON_NODES=/etc/hosts

# DHCP file we use to store the info of the registered nodes.
KESTREL_REG_NODES=${KESTREL_DATA_DIR}/registered_nodes
