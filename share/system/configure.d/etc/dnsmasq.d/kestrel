#
# File autogenerated by kestrel-reconfigure on $(date)
# 
# Do not edit it directly! Instead create a new file at /etc/dnsmasq.d/.
# 
# If you wish to modify heavily the autogeneration template, create a copy of
# the template under the etc dir :
# cp /usr/share/kestrel/frontend/configure.d/system/etc/dnsmasq.d/kestrel \
#    /etc/kestrel/frontend/configure.d/system/etc/dnsmasq.d/kestrel
#

# Read the IP addresses of the upstream nameservers from <file>, instead of 
# /etc/resolv.conf
#resolv-file=/etc/resolv.conf.real

# Listen on the given IP address(es)
listen-address=${FRONTEND_IP},127.0.0.1

# Enable  the  DHCP server. Addresses will be given out from the range 
# <start-addr> to <end-addr> and from statically defined # addresses given in 
# dhcp-host options
dhcp-range=${DHCP_STARTING_IP},${DHCP_ENDING_IP},12h

# Specify different or extra options to DHCP clients
dhcp-option=option:router,${FRONTEND_IP}
dhcp-option=option:tftp-server,${FRONTEND_IP}

# Options for Macs
dhcp-boot=burg64.efi
dhcp-vendorclass=apple-boot,AAPLBSDPC/i386
dhcp-option-force=net:apple-boot,43,08:04:81:00:00:67
dhcp-option-force=net:apple-boot,60,"AAPLBSDPC/i386"

# Set BOOTP options to be returned by the DHCP server.
dhcp-boot=net:#apple-boot,pxelinux.0,${HOSTNAME},${FRONTEND_IP}
dhcp-boot=net:apple-boot,grub.efi

# Enable the TFTP server function.
enable-tftp

# Make the TFTP server more secure: with this set, only files owned by
# the user dnsmasq is running as will be send over the net.
#tftp-secure

# Look for files to transfer using TFTP relative to the given directory.
tftp-root=${TFTPBOOT_DIR}

# Should  be set when dnsmasq is definitely the only DHCP server on a network.
# It changes the behaviour from strict RFC compliance so that DHCP requests on
# unknown leases from unknown hosts are not ignored
#dhcp-authoritative

# Read /etc/ethers for information about hosts for the DHCP server.
#read-ethers
dhcp-hostsfile=${KESTREL_REG_NODES}

# Extra logging for DHCP: log all the options sent to DHCP clients and the netid
# tags used to  determine them.
log-dhcp
